/**! fjl-input-filter.min.js 1.1.12 | License: BSD-3-Clause | md5checksum: 2a3571cd58b159da2341c09e0becff2b | Built-on: Mon Mar 26 2018 03:32:55 GMT-0400 (Eastern Daylight Time) **/var fjlInputFilter=function(e,r,t,n){"use strict";var u=console.error.bind(console),a=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),l=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,u=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){u=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(u)throw a}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(e,r){return!e.required&&(!t.isset(r)||(t.isString(r)||t.isArray(r))&&!r.length)},s=function(e,r){var n=e.validators,u=e.filters,a=e.breakOnFailure,i=e.valueObscured,l=e.valueObscurator,s=e.name;if(o(e,r))return m({result:!0,name:s||"",rawValue:r,value:r,filteredValue:r,obscuredValue:r});var f=v(n,a,r),c=d(u,r),h=i&&l?l(c):c;return m(t.assign(f,{name:s||"",rawValue:r,value:c,filteredValue:c,obscuredValue:h}))},f=function(e,r){var t=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator;return o(e,r)?Promise.resolve(m({result:!0,name:e.name||"",rawValue:r,value:r,filteredValue:r,obscuredValue:r})):(t&&t.length?c(t,u,r,e):Promise.resolve({result:!0})).then(function(e){return h(n,r).then(function(t){return e.rawValue=r,e.value=e.filteredValue=t,e.obscuredValue=a&&i?i(t):t,m(e)})})},v=function(e,r,u){var a=!0,i=0,l=[];if(!e||!e.length)return n.toValidationResult({result:a});for(var o=e.length;i<o;i++){var s=e[i](u);if(!s.result&&(l.push(s.messages),a=!1,r))break}return n.toValidationResult({result:a,messages:t.concat(l)})},c=function(e,r,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;if(!e||!e.length)return Promise.resolve(n.toValidationResult({result:!0}));for(var i=e.length,l=[],o=0,s=!0;o<i;o++){var f=(0,e[o])(t);if(f instanceof Promise)l.push(f.catch(a));else if(l.push(f),!f.result&&(s=!1,r))break}return Promise.all(l).then(function(e){var r=e.filter(function(e){return!e.result}),t={result:s,messages:r.reduce(function(e,r){return e.concat(r.messages)},[])};return r.length&&(t.result=!1),n.toValidationResult(t)}).catch(a)},d=function(e,r){return e&&e.length?t.apply(t.compose,e)(r):r},h=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return d(e?e.map(function(e){return function(r){return r.then(e)}}):null,Promise.resolve(r).catch(t))},p=function(e){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.defineEnumProps$([[String,"name",""],[Boolean,"required",!1],[Array,"filters",[]],[Array,"validators",[]],[Boolean,"breakOnFailure",!1]],n.toValidationOptions(u));return t.isString(e)?a.name=e:e&&t.assign(a,e),a.required&&(a.validators=a.validators.slice(0),a.validators.push(n.notEmptyValidator(null))),a},m=function(e){var n=r.defineEnumProps$([[String,"name",""],[Boolean,"result",!1],[Array,"messages",[]]],{value:null,rawValue:null,obscuredValue:null,filteredValue:null});return t.assign(n,e)},g=function(){function e(r){a(this,e),p(r,this)}return i(e,[{key:"validate",value:function(e){return s(this,e)}},{key:"validateIO",value:function(e){return f(this,e)}}],[{key:"of",value:function(r){return new e(r)}}]),e}(),b=function(e){return t.keys(e).map(function(r){return[r,e[r]]})},y=function(e){return t.foldl(function(e,r){var t=l(r,2),n=t[0],u=t[1];return e[n]=u,e},{},e)},I=function(e,r){if(!e||!r)return P({result:!1});var n=t.partition(function(e){var r=l(e,2);r[0];return r[1].result},t.map(function(e){var t=l(e,2),n=t[0],u=t[1];return[n,s(u,r[n])]},b(e))),u=l(n,2),a=u[0],i=u[1],o=t.foldl(function(e,r){var t=l(r,2),n=t[0],u=t[1];return e[n]=u.messages,e},{},i),f=y(a),v=y(i),c=!i.length;return P({result:c,validInputs:f,invalidInputs:v,validResults:a,invalidResults:i,messages:o})},V=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return e&&r?Promise.all(t.map(function(e){var t=l(e,2),n=t[0],u=t[1];return O(u,n,r[n])},b(e))).then(function(e){var r=t.partition(function(e){var r=l(e,2);r[0];return r[1].result},e),n=l(r,2),u=n[0],a=n[1],i=t.foldl(function(e,r){var t=l(r,2),n=t[0],u=t[1];return e[n]=u.messages,e},{},a),o=y(u),s=y(a),f=!a.length;return P({result:f,validInputs:o,invalidInputs:s,validResults:u,invalidResults:a,messages:i})},n):Promise.resolve(P({result:!1}))},O=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return f(e,t).then(function(e){return Promise.resolve([r,e])},n)},k=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.defineProperties(n,t.foldl(function(e,n){var u=l(n,2),a=u[0],i=u[1],o=p(t.assign(i,{name:a}));return o.breakOnFailure=r,e[a]={value:o,enumerable:!0},e},{},t.map(function(r){return[r,e[r]]},t.keys(e))))},P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=r.defineEnumProps$([[Boolean,"result",!1],[Object,"messages",{}],[Object,"validInputs",{}],[Object,"invalidInputs",{}],[Array,"validResults",[]],[Array,"invalidResults",[]]],n);return e?t.assign(u,e):u},w=function(){function e(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,e),k(r,t,this)}return i(e,[{key:"validate",value:function(e){return I(this,e)}},{key:"validateIO",value:function(e){return V(this,e)}}],[{key:"of",value:function(r,t){return new e(r,t)}}]),e}();return e.noValidationRequired=o,e.validateInput=s,e.validateIOInput=f,e.runValidators=v,e.runIOValidators=c,e.runFilters=d,e.runIOFilters=h,e.toInput=p,e.toInputValidationResult=m,e.Input=g,e.toArrayMap=b,e.fromArrayMap=y,e.validateInputFilter=I,e.validateIOInputFilter=V,e.validateIOInputWithName=O,e.toInputFilter=k,e.toInputFilterResult=P,e.InputFilter=w,e}({},fjlMutable,fjl,fjlValidator);