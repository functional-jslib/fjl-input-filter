/**! fjl-input-filter.min.js 1.0.0 | License: BSD-3-Clause | md5checksum: 620036141f21b57a40a7acba9522248a | Built-on: Sat Jan 20 2018 14:58:11 GMT-0500 (Eastern Standard Time) **/var fjlInputFilter=function(e,r,n,t){"use strict";var u=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var n=[],t=!0,u=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done)&&(n.push(i.value),!r||n.length!==r);t=!0);}catch(e){u=!0,a=e}finally{try{!t&&l.return&&l.return()}finally{if(u)throw a}}return n}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=console.log.bind(console),o=function(e,r){var t=e.validators,u=e.filters,a=e.breakOnFailure,i=e.valueObscured,l=e.valueObscurator,o=e.name,s=f(t,a,r),c=v(u,r),d=i&&l?l(c):c;return p(n.assign(s,{name:o||"",rawValue:r,value:c,filteredValue:c,obscuredValue:d}))},s=function(e,r){var n=e.validators,t=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator;return(n&&n.length?c(n,u,r,e):Promise.resolve({result:!0})).then(function(e){return d(t,r).then(function(n){return e.rawValue=r,e.value=e.filteredValue=n,e.obscuredValue=a&&i?i(n):n,p(e)})})},f=function(e,r,u){var a=!0,i=0,l=[];if(!e||!e.length)return t.toValidationResult({result:a});for(var o=e.length;i<o;i++){var s=e[i](u);if(!s.result&&(l.push(s.messages),a=!1,r))break}return t.toValidationResult({result:a,messages:n.concat(l)})},c=function(e,r,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;if(!e||!e.length)return Promise.resolve(t.toValidationResult({result:!0}));for(var a=e.length,i=[],o=0,s=!0;o<a;o++){var f=(0,e[o])(n);if(f instanceof Promise)i.push(f.catch(u));else if(i.push(f),!f.result&&(s=!1,r))break}return Promise.all(i).then(function(e){var r=e.filter(function(e){return!e.result}),n={result:s,messages:r.reduce(function(e,r){return e=e.concat(r.messages)},[])};return r.length&&(n.result=!1),t.toValidationResult(n)}).catch(u)},v=function(e,r){return e&&e.length?n.apply(n.compose,e)(r):r},d=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return v(e?e.map(function(e){return function(r){return r.then(e)}}):null,Promise.resolve(r).catch(n))},h=function(e){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.defineEnumProps$([[String,"name",""],[Boolean,"required",!1],[Array,"filters",[]],[Array,"validators",[]],[Boolean,"breakOnFailure",!1]],t.toValidationOptions(u));return n.isString(e)?a.name=e:e&&n.assign(a,e),a.required&&a.validators.push(t.notEmptyValidator(null)),a},p=function(e){var t=r.defineEnumProps$([[String,"name",""],[Boolean,"result",!1],[Array,"messages",[]]],{value:null,rawValue:null,obscuredValue:null,filteredValue:null});return n.assign(t,e)},m=function(){function e(r){u(this,e),h(r,this)}return a(e,[{key:"validate",value:function(e){return o(this,e)}},{key:"validateIO",value:function(e){return s(this,e)}}],[{key:"of",value:function(r){return new e(r)}}]),e}(),g=console.error.bind(console),b=function(e){return n.keys(e).map(function(r){return[r,e[r]]})},y=function(e){return n.foldl(function(e,r){var n=i(r,2),t=n[0],u=n[1];return e[t]=u,e},{},e)},I=function(e,r){if(!e||!r)return P({result:!1});var t=n.partition(function(e){var r=i(e,2);r[0];return r[1].result},n.map(function(e){var n=i(e,2),t=n[0],u=n[1];return[t,o(u,r[t])]},b(e))),u=i(t,2),a=u[0],l=u[1],s=n.foldl(function(e,r){var n=i(r,2),t=n[0],u=n[1];return e[t]=u.messages,e},{},l),f=y(a),c=y(l),v=!l.length;return P({result:v,validInputs:f,invalidInputs:c,validResults:a,invalidResults:l,messages:s})},O=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return e&&r?Promise.all(n.map(function(e){var n=i(e,2),t=n[0],u=n[1];return V(u,t,r[t])},b(e))).then(function(e){var r=n.partition(function(e){var r=i(e,2);r[0];return r[1].result},e),t=i(r,2),u=t[0],a=t[1],l=n.foldl(function(e,r){var n=i(r,2),t=n[0],u=n[1];return e[t]=u.messages,e},{},a),o=y(u),s=y(a),f=!a.length;return P({result:f,validInputs:o,invalidInputs:s,validResults:u,invalidResults:a,messages:l})},t):Promise.resolve(P({result:!1}))},V=function(e,r,n){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;return s(e,n).then(function(e){return Promise.resolve([r,e])},t)},k=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.defineProperties(t,n.foldl(function(e,t){var u=i(t,2),a=u[0],l=u[1],o=h(n.assign(l,{name:a}));return o.breakOnFailure=r,e[a]={value:o,enumerable:!0},e},{},n.map(function(r){return[r,e[r]]},n.keys(e))))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=r.defineEnumProps$([[Boolean,"result",!1],[Object,"messages",{}],[Object,"validInputs",{}],[Object,"invalidInputs",{}],[Array,"validResults",[]],[Array,"invalidResults",[]]],t);return e?n.assign(u,e):u},F=function(){function e(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(this,e),k(r,n,this)}return a(e,[{key:"validate",value:function(e){return I(this,e)}},{key:"validateIO",value:function(e){return O(this,e)}}],[{key:"of",value:function(r,n){return new e(r,n)}}]),e}();return e.defaultErrorCallback=l,e.validateInput=o,e.validateIOInput=s,e.runValidators=f,e.runIOValidators=c,e.runFilters=v,e.runIOFilters=d,e.toInput=h,e.toInputValidationResult=p,e.Input=m,e.defaultErrorHandler=g,e.toArrayMap=b,e.fromArrayMap=y,e.validateInputFilter=I,e.validateIOInputFilter=O,e.validateIOInputWithName=V,e.toInputFilter=k,e.toInputFilterResult=P,e.InputFilter=F,e}({},fjlMutable,fjl,fjlValidator);