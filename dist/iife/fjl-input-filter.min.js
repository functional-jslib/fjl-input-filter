/**! fjl-input-filter.js 1.2.5 | License: BSD-3-Clause | Built-on: Sat May 04 2019 17:02:39 GMT-0400 (Eastern Daylight Time) **/var fjlInputFilter=function(e,f,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,u=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){u=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(u)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t){return!e.required&&(!f.isset(t)||(f.isString(t)||f.isArray(t))&&!t.length)}function d(e,t){var r=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator,l=e.name;if(v(e,t))return I({result:!0,name:l||"",rawValue:t,value:t,filteredValue:t,obscuredValue:t});var s=p(r,u,t),o=b(n,t),c=a&&i?i(o):o;return I(f.assign(s,{name:l||"",rawValue:t,value:o,filteredValue:o,obscuredValue:c}))}function i(e,r){var t=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator;return v(e,r)?Promise.resolve(I({result:!0,name:e.name||"",rawValue:r,value:r,filteredValue:r,obscuredValue:r})):(t&&t.length?g(t,u,r,e):Promise.resolve({result:!0})).then(function(t){return y(n,r).then(function(e){return t.rawValue=r,t.value=t.filteredValue=e,t.obscuredValue=a&&i?i(e):e,I(t)})})}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=f.defineEnumProps([[String,"name",""],[Boolean,"required",!1],[Array,"filters",[]],[Array,"validators",[]],[Boolean,"breakOnFailure",!1]],o.toValidationOptions(t));return f.isString(e)?r.name=e:e&&f.assign(r,e),r.required&&(r.validators=r.validators.slice(0),r.validators.push(o.notEmptyValidator(null))),r}function t(e,u){if(!e||!u)return O({result:!1});var t=c(f.partition(function(e){var t=c(e,2);t[0];return t[1].result},f.map(function(e){var t=c(e,2),r=t[0],n=t[1];return[r,d(n,u[r])]},f.toAssocList(e))),2),r=t[0],n=t[1],a=f.foldl(function(e,t){var r=c(t,2),n=r[0],u=r[1];return e[n]=u.messages,e},{},n),i=f.fromAssocList(r),l=f.fromAssocList(n),s=!n.length;return O({result:s,validInputs:i,invalidInputs:l,validResults:r,invalidResults:n,messages:a})}function s(e,u){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m;return e&&u?Promise.all(f.map(function(e){var t=c(e,2),r=t[0],n=t[1];return V(n,r,u[r])},f.toAssocList(e))).then(function(e){var t=c(f.partition(function(e){var t=c(e,2);t[0];return t[1].result},e),2),r=t[0],n=t[1],u=f.foldl(function(e,t){var r=c(t,2),n=r[0],u=r[1];return e[n]=u.messages,e},{},n),a=f.fromAssocList(r),i=f.fromAssocList(n),l=!n.length;return O({result:l,validInputs:a,invalidInputs:i,validResults:r,invalidResults:n,messages:u})},t):Promise.resolve(O({result:!1}))}function h(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.defineProperties(e,f.foldl(function(e,t){var r=c(t,2),n=r[0],u=r[1],a=l(f.assign(u,{name:n}));return a.breakOnFailure=i,e[n]={value:a,enumerable:!0},e},{},f.map(function(e){return[e,t[e]]},f.keys(t))))}var m=console.error.bind(console),p=function(e,t,r){var n=!0,u=0,a=[];if(!e||!e.length)return o.toValidationResult({result:n});for(var i=e.length;u<i;u++){var l=e[u](r);if(!l.result&&(a.push(l.messages),n=!1,t))break}return o.toValidationResult({result:n,messages:f.concat(a)})},g=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:m;if(!e||!e.length)return Promise.resolve(o.toValidationResult({result:!0}));for(var u=e.length,a=[],i=0,l=!0;i<u;i++){var s=(0,e[i])(r);if(s instanceof Promise)a.push(s.catch(n));else if(a.push(s),!s.result&&(l=!1,t))break}return Promise.all(a).then(function(e){var t=e.filter(function(e){return!e.result}),r={result:l,messages:t.reduce(function(e,t){return e.concat(t.messages)},[])};return t.length&&(r.result=!1),o.toValidationResult(r)}).catch(n)},b=function(e,t){return e&&e.length?f.apply(f.compose,e)(t):t},y=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m;return b(e?e.map(function(t){return function(e){return e.then(t)}}):null,Promise.resolve(t).catch(r))},I=function(e){var t=f.defineEnumProps([[String,"name",""],[Boolean,"result",!1],[Array,"messages",[]]],{value:null,rawValue:null,obscuredValue:null,filteredValue:null});return f.assign(t,e)},r=function(){function t(e){n(this,t),l(e,this)}return a(t,[{key:"validate",value:function(e){return d(this,e)}},{key:"validateIO",value:function(e){return i(this,e)}}],[{key:"of",value:function(e){return new t(e)}}]),t}(),V=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:m;return i(e,r).then(function(e){return Promise.resolve([t,e])},n)},O=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=f.defineEnumProps([[Boolean,"result",!1],[Object,"messages",{}],[Object,"validInputs",{}],[Object,"invalidInputs",{}],[Array,"validResults",[]],[Array,"invalidResults",[]]],t);return e?f.assign(r,e):r},k=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];n(this,r),h(e,t,this)}return a(r,[{key:"validate",value:function(e){return t(this,e)}},{key:"validateIO",value:function(e){return s(this,e)}}],[{key:"of",value:function(e,t){return new r(e,t)}}]),r}();return e.Input=r,e.InputFilter=k,e.noValidationRequired=v,e.runFilters=b,e.runIOFilters=y,e.runIOValidators=g,e.runValidators=p,e.toInput=l,e.toInputFilter=h,e.toInputFilterResult=O,e.toInputValidationResult=I,e.validateIOInput=i,e.validateIOInputFilter=s,e.validateIOInputWithName=V,e.validateInput=d,e.validateInputFilter=t,e}({},fjl,fjlValidator);