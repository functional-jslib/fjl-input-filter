/**! fjl-input-filter.js 1.2.0 | License: BSD-3-Clause | Built-on: Fri Nov 09 2018 23:06:34 GMT-0500 (Eastern Standard Time) **/var fjlInputFilter=function(e,t,r,n){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,u=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){u=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(u)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=console.error.bind(console),o=function(e,t){return!e.required&&(!r.isset(t)||(r.isString(t)||r.isArray(t))&&!t.length)},f=function(e,t){var n=e.validators,u=e.filters,a=e.breakOnFailure,i=e.valueObscured,l=e.valueObscurator,s=e.name;if(o(e,t))return g({result:!0,name:s||"",rawValue:t,value:t,filteredValue:t,obscuredValue:t});var f=v(n,a,t),c=h(u,t),d=i&&l?l(c):c;return g(r.assign(f,{name:s||"",rawValue:t,value:c,filteredValue:c,obscuredValue:d}))},c=function(e,t){var r=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator;return o(e,t)?Promise.resolve(g({result:!0,name:e.name||"",rawValue:t,value:t,filteredValue:t,obscuredValue:t})):(r&&r.length?d(r,u,t,e):Promise.resolve({result:!0})).then(function(e){return m(n,t).then(function(r){return e.rawValue=t,e.value=e.filteredValue=r,e.obscuredValue=a&&i?i(r):r,g(e)})})},v=function(e,t,u){var a=!0,i=0,l=[];if(!e||!e.length)return n.toValidationResult({result:a});for(var s=e.length;i<s;i++){var o=e[i](u);if(!o.result&&(l.push(o.messages),a=!1,t))break}return n.toValidationResult({result:a,messages:r.concat(l)})},d=function(e,t,r){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s;if(!e||!e.length)return Promise.resolve(n.toValidationResult({result:!0}));for(var a=e.length,i=[],l=0,o=!0;l<a;l++){var f=(0,e[l])(r);if(f instanceof Promise)i.push(f.catch(u));else if(i.push(f),!f.result&&(o=!1,t))break}return Promise.all(i).then(function(e){var t=e.filter(function(e){return!e.result}),r={result:o,messages:t.reduce(function(e,t){return e.concat(t.messages)},[])};return t.length&&(r.result=!1),n.toValidationResult(r)}).catch(u)},h=function(e,t){return e&&e.length?r.apply(r.compose,e)(t):t},m=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return h(e?e.map(function(e){return function(t){return t.then(e)}}):null,Promise.resolve(t).catch(r))},p=function(e){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.defineEnumProps([[String,"name",""],[Boolean,"required",!1],[Array,"filters",[]],[Array,"validators",[]],[Boolean,"breakOnFailure",!1]],n.toValidationOptions(u));return r.isString(e)?a.name=e:e&&r.assign(a,e),a.required&&(a.validators=a.validators.slice(0),a.validators.push(n.notEmptyValidator(null))),a},g=function(e){var n=t.defineEnumProps([[String,"name",""],[Boolean,"result",!1],[Array,"messages",[]]],{value:null,rawValue:null,obscuredValue:null,filteredValue:null});return r.assign(n,e)},b=function(){function e(t){u(this,e),p(t,this)}return i(e,[{key:"validate",value:function(e){return f(this,e)}},{key:"validateIO",value:function(e){return c(this,e)}}],[{key:"of",value:function(t){return new e(t)}}]),e}(),y=function(e,t){if(!e||!t)return k({result:!1});var n=l(r.partition(function(e){var t=l(e,2);t[0];return t[1].result},r.map(function(e){var r=l(e,2),n=r[0],u=r[1];return[n,f(u,t[n])]},r.toAssocList(e))),2),u=n[0],a=n[1],i=r.foldl(function(e,t){var r=l(t,2),n=r[0],u=r[1];return e[n]=u.messages,e},{},a),s=r.fromAssocList(u),o=r.fromAssocList(a),c=!a.length;return k({result:c,validInputs:s,invalidInputs:o,validResults:u,invalidResults:a,messages:i})},I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return e&&t?Promise.all(r.map(function(e){var r=l(e,2),n=r[0],u=r[1];return V(u,n,t[n])},r.toAssocList(e))).then(function(e){var t=l(r.partition(function(e){var t=l(e,2);t[0];return t[1].result},e),2),n=t[0],u=t[1],a=r.foldl(function(e,t){var r=l(t,2),n=r[0],u=r[1];return e[n]=u.messages,e},{},u),i=r.fromAssocList(n),s=r.fromAssocList(u),o=!u.length;return k({result:o,validInputs:i,invalidInputs:s,validResults:n,invalidResults:u,messages:a})},n):Promise.resolve(k({result:!1}))},V=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s;return c(e,r).then(function(e){return Promise.resolve([t,e])},n)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.defineProperties(n,r.foldl(function(e,n){var u=l(n,2),a=u[0],i=u[1],s=p(r.assign(i,{name:a}));return s.breakOnFailure=t,e[a]={value:s,enumerable:!0},e},{},r.map(function(t){return[t,e[t]]},r.keys(e))))},k=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=t.defineEnumProps([[Boolean,"result",!1],[Object,"messages",{}],[Object,"validInputs",{}],[Object,"invalidInputs",{}],[Array,"validResults",[]],[Array,"invalidResults",[]]],n);return e?r.assign(u,e):u},A=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(this,e),O(t,r,this)}return i(e,[{key:"validate",value:function(e){return y(this,e)}},{key:"validateIO",value:function(e){return I(this,e)}}],[{key:"of",value:function(t,r){return new e(t,r)}}]),e}();return e.noValidationRequired=o,e.validateInput=f,e.validateIOInput=c,e.runValidators=v,e.runIOValidators=d,e.runFilters=h,e.runIOFilters=m,e.toInput=p,e.toInputValidationResult=g,e.Input=b,e.validateInputFilter=y,e.validateIOInputFilter=I,e.validateIOInputWithName=V,e.toInputFilter=O,e.toInputFilterResult=k,e.InputFilter=A,e}({},fjlMutable,fjl,fjlValidator);