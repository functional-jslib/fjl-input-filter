/**! fjl-input-filter.js 1.2.4 | License: BSD-3-Clause | Built-on: Sat May 04 2019 15:55:00 GMT-0400 (Eastern Daylight Time) **/var fjlInputFilter=function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,u=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){u=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(u)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=console.error.bind(console),s=function(e,r){return!e.required&&(!t.isset(r)||(t.isString(r)||t.isArray(r))&&!r.length)},o=function(e,r){var n=e.validators,u=e.filters,a=e.breakOnFailure,i=e.valueObscured,l=e.valueObscurator,o=e.name;if(s(e,r))return p({result:!0,name:o||"",rawValue:r,value:r,filteredValue:r,obscuredValue:r});var c=f(n,a,r),v=d(u,r),h=i&&l?l(v):v;return p(t.assign(c,{name:o||"",rawValue:r,value:v,filteredValue:v,obscuredValue:h}))},c=function(e,t){var r=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator;return s(e,t)?Promise.resolve(p({result:!0,name:e.name||"",rawValue:t,value:t,filteredValue:t,obscuredValue:t})):(r&&r.length?v(r,u,t,e):Promise.resolve({result:!0})).then(function(e){return h(n,t).then(function(r){return e.rawValue=t,e.value=e.filteredValue=r,e.obscuredValue=a&&i?i(r):r,p(e)})})},f=function(e,n,u){var a=!0,i=0,l=[];if(!e||!e.length)return r.toValidationResult({result:a});for(var s=e.length;i<s;i++){var o=e[i](u);if(!o.result&&(l.push(o.messages),a=!1,n))break}return r.toValidationResult({result:a,messages:t.concat(l)})},v=function(e,t,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;if(!e||!e.length)return Promise.resolve(r.toValidationResult({result:!0}));for(var a=e.length,i=[],s=0,o=!0;s<a;s++){var c=(0,e[s])(n);if(c instanceof Promise)i.push(c.catch(u));else if(i.push(c),!c.result&&(o=!1,t))break}return Promise.all(i).then(function(e){var t=e.filter(function(e){return!e.result}),n={result:o,messages:t.reduce(function(e,t){return e.concat(t.messages)},[])};return t.length&&(n.result=!1),r.toValidationResult(n)}).catch(u)},d=function(e,r){return e&&e.length?t.apply(t.compose,e)(r):r},h=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return d(e?e.map(function(e){return function(t){return t.then(e)}}):null,Promise.resolve(t).catch(r))},m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=t.defineEnumProps([[String,"name",""],[Boolean,"required",!1],[Array,"filters",[]],[Array,"validators",[]],[Boolean,"breakOnFailure",!1]],r.toValidationOptions(n));return t.isString(e)?u.name=e:e&&t.assign(u,e),u.required&&(u.validators=u.validators.slice(0),u.validators.push(r.notEmptyValidator(null))),u},p=function(e){var r=t.defineEnumProps([[String,"name",""],[Boolean,"result",!1],[Array,"messages",[]]],{value:null,rawValue:null,obscuredValue:null,filteredValue:null});return t.assign(r,e)},g=function(){function e(t){n(this,e),m(t,this)}return a(e,[{key:"validate",value:function(e){return o(this,e)}},{key:"validateIO",value:function(e){return c(this,e)}}],[{key:"of",value:function(t){return new e(t)}}]),e}(),b=function(e,r){if(!e||!r)return O({result:!1});var n=i(t.partition(function(e){var t=i(e,2);t[0];return t[1].result},t.map(function(e){var t=i(e,2),n=t[0],u=t[1];return[n,o(u,r[n])]},t.toAssocList(e))),2),u=n[0],a=n[1],l=t.foldl(function(e,t){var r=i(t,2),n=r[0],u=r[1];return e[n]=u.messages,e},{},a),s=t.fromAssocList(u),c=t.fromAssocList(a),f=!a.length;return O({result:f,validInputs:s,invalidInputs:c,validResults:u,invalidResults:a,messages:l})},y=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return e&&r?Promise.all(t.map(function(e){var t=i(e,2),n=t[0],u=t[1];return I(u,n,r[n])},t.toAssocList(e))).then(function(e){var r=i(t.partition(function(e){var t=i(e,2);t[0];return t[1].result},e),2),n=r[0],u=r[1],a=t.foldl(function(e,t){var r=i(t,2),n=r[0],u=r[1];return e[n]=u.messages,e},{},u),l=t.fromAssocList(n),s=t.fromAssocList(u),o=!u.length;return O({result:o,validInputs:l,invalidInputs:s,validResults:n,invalidResults:u,messages:a})},n):Promise.resolve(O({result:!1}))},I=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;return c(e,r).then(function(e){return Promise.resolve([t,e])},n)},V=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.defineProperties(n,t.foldl(function(e,n){var u=i(n,2),a=u[0],l=u[1],s=m(t.assign(l,{name:a}));return s.breakOnFailure=r,e[a]={value:s,enumerable:!0},e},{},t.map(function(t){return[t,e[t]]},t.keys(e))))},O=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defineEnumProps([[Boolean,"result",!1],[Object,"messages",{}],[Object,"validInputs",{}],[Object,"invalidInputs",{}],[Array,"validResults",[]],[Array,"invalidResults",[]]],r);return e?t.assign(n,e):n},k=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(this,e),V(t,r,this)}return a(e,[{key:"validate",value:function(e){return b(this,e)}},{key:"validateIO",value:function(e){return y(this,e)}}],[{key:"of",value:function(t,r){return new e(t,r)}}]),e}();return e.noValidationRequired=s,e.validateInput=o,e.validateIOInput=c,e.runValidators=f,e.runIOValidators=v,e.runFilters=d,e.runIOFilters=h,e.toInput=m,e.toInputValidationResult=p,e.Input=g,e.validateInputFilter=b,e.validateIOInputFilter=y,e.validateIOInputWithName=I,e.toInputFilter=V,e.toInputFilterResult=O,e.InputFilter=k,e}({},fjl,fjlValidator);