/**! fjl-input-filter.js 1.2.8 | License: BSD-3-Clause | Built-on: Sat Jul 25 2020 10:02:32 GMT-0400 (Eastern Daylight Time) **/var fjlInputFilter=function(e,f,c){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,r,t){return r&&u(e.prototype,r),t&&u(e,t),e}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,u=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){u=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(u)throw a}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function d(e,r){return!e.required&&(!f.isset(r)||(f.isString(r)||f.isArray(r))&&!r.length)}function m(e,r){var t=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator,l=e.name;if(d(e,r))return I({result:!0,name:l||"",rawValue:r,value:r,filteredValue:r,obscuredValue:r});var o=p(t,u,r),s=g(n,r),c=a&&i?i(s):s;return I(f.assign(o,{name:l||"",rawValue:r,value:s,filteredValue:s,obscuredValue:c}))}function l(e,t){var r=e.validators,n=e.filters,u=e.breakOnFailure,a=e.valueObscured,i=e.valueObscurator;return d(e,t)?Promise.resolve(I({result:!0,name:e.name||"",rawValue:t,value:t,filteredValue:t,obscuredValue:t})):(r&&r.length?s(r,u,t,e):Promise.resolve({result:!0})).then(function(r){return b(n,t).then(function(e){return r.rawValue=t,r.value=r.filteredValue=e,r.obscuredValue=a&&i?i(e):e,I(r)})})}function r(e,u){if(!e||!u)return A({result:!1});var r=f.partition(function(e){var r=v(e,2);r[0];return r[1].result},f.map(function(e){var r=v(e,2),t=r[0],n=r[1];return[t,m(n,u[t])]},f.toAssocList(e))),t=v(r,2),n=t[0],a=t[1],i=f.foldl(function(e,r){var t=v(r,2),n=t[0],u=t[1];return e[n]=u.messages,e},{},a),l=f.fromAssocList(n),o=f.fromAssocList(a),s=!a.length;return A({result:s,validInputs:l,invalidInputs:o,validResults:n,invalidResults:a,messages:i})}function o(e,u,r){var t=2<arguments.length&&void 0!==r?r:h;return e&&u?Promise.all(f.map(function(e){var r=v(e,2),t=r[0],n=r[1];return V(n,t,u[t])},f.toAssocList(e))).then(function(e){var r=f.partition(function(e){var r=v(e,2);r[0];return r[1].result},e),t=v(r,2),n=t[0],u=t[1],a=f.foldl(function(e,r){var t=v(r,2),n=t[0],u=t[1];return e[n]=u.messages,e},{},u),i=f.fromAssocList(n),l=f.fromAssocList(u),o=!u.length;return A({result:o,validInputs:i,invalidInputs:l,validResults:n,invalidResults:u,messages:a})},t):Promise.resolve(A({result:!1}))}var h=console.error.bind(console),p=function(e,r,t){var n=!0,u=0,a=[];if(!e||!e.length)return c.toValidationResult({result:n});for(var i=e.length;u<i;u++){var l=e[u](t);if(!l.result&&(a.push(l.messages),n=!1,r))break}return c.toValidationResult({result:n,messages:f.concat(a)})},s=function(e,r,t,n){var u=3<arguments.length&&void 0!==n?n:h;if(!e||!e.length)return Promise.resolve(c.toValidationResult({result:!0}));for(var a=e.length,i=[],l=0,o=!0;l<a;l++){var s=(0,e[l])(t);if(s instanceof Promise)i.push(s.catch(u));else if(i.push(s),!s.result&&(o=!1,r))break}return Promise.all(i).then(function(e){var r=e.filter(function(e){return!e.result}),t={result:o,messages:r.reduce(function(e,r){return e.concat(r.messages)},[])};return r.length&&(t.result=!1),c.toValidationResult(t)}).catch(u)},g=function(e,r){return e&&e.length?f.apply(f.compose,e)(r):r},b=function(e,r,t){var n=2<arguments.length&&void 0!==t?t:h;return g(e?e.map(function(r){return function(e){return e.then(r)}}):null,Promise.resolve(r).catch(n))},y=function(e,r){var t=1<arguments.length&&void 0!==r?r:{},n=f.defineEnumProps([[String,"name",""],[Boolean,"required",!1],[Array,"filters",[]],[Array,"validators",[]],[Boolean,"breakOnFailure",!1]],c.toValidationOptions(t));return f.isString(e)?n.name=e:e&&f.assign(n,e),n.required&&(n.validators=n.validators.slice(0),n.validators.push(c.notEmptyValidator(null))),n},I=function(e){var r=f.defineEnumProps([[String,"name",""],[Boolean,"result",!1],[Array,"messages",[]]],{value:null,rawValue:null,obscuredValue:null,filteredValue:null});return f.assign(r,e)},t=function(){function r(e){n(this,r),y(e,this)}return a(r,[{key:"validate",value:function(e){return m(this,e)}},{key:"validateIO",value:function(e){return l(this,e)}}],[{key:"of",value:function(e){return new r(e)}}]),r}(),V=function(e,r,t,n){var u=3<arguments.length&&void 0!==n?n:h;return l(e,t).then(function(e){return Promise.resolve([r,e])},u)},O=function(r,e,t){var i=1<arguments.length&&void 0!==e&&e,n=2<arguments.length&&void 0!==t?t:{};return Object.defineProperties(n,f.foldl(function(e,r){var t=v(r,2),n=t[0],u=t[1],a=y(f.assign(u,{name:n}));return a.breakOnFailure=i,e[n]={value:a,enumerable:!0},e},{},f.map(function(e){return[e,r[e]]},f.keys(r))))},A=function(e,r){var t=1<arguments.length&&void 0!==r?r:{},n=f.defineEnumProps([[Boolean,"result",!1],[Object,"messages",{}],[Object,"validInputs",{}],[Object,"invalidInputs",{}],[Array,"validResults",[]],[Array,"invalidResults",[]]],t);return e?f.assign(n,e):n},k=function(){function t(e){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];n(this,t),O(e,r,this)}return a(t,[{key:"validate",value:function(e){return r(this,e)}},{key:"validateIO",value:function(e){return o(this,e)}}],[{key:"of",value:function(e,r){return new t(e,r)}}]),t}();return e.Input=t,e.InputFilter=k,e.noValidationRequired=d,e.runFilters=g,e.runIOFilters=b,e.runIOValidators=s,e.runValidators=p,e.toInput=y,e.toInputFilter=O,e.toInputFilterResult=A,e.toInputValidationResult=I,e.validateIOInput=l,e.validateIOInputFilter=o,e.validateIOInputWithName=V,e.validateInput=m,e.validateInputFilter=r,e}({},fjl,fjlValidator);